"use strict";(self.webpackChunkaccounting=self.webpackChunkaccounting||[]).push([[725],{308:(R,b,l)=>{l.d(b,{D:()=>f});var d=l(4650),x=l(9444);let f=(()=>{class e{constructor(u){this.api=u,this.path="system/relying-party"}findAllRelyingParty(){return this.api.get(this.path)}createRelyingParty(u){return this.api.post(this.path,u)}deleteRelyingParty(u){return this.api.delete(this.path+`/${u}`)}updateRelyingParty(u,I){return this.api.put(this.path+`/${I}`,u)}updateRelyingPartyStatusActive(u){return this.api.put(this.path+`/${u}/active`,null)}updateRelyingPartyStatusInactive(u){return this.api.put(this.path+`/${u}/inactive`,null)}getRelyingPartyServicePackage(u){return this.api.get(this.path+`/${u}/packages`)}getRelyingPartyUserAccount(u){return this.api.get(this.path+`/${u}/user-accounts`)}getRelyingPartyUserAuthenticator(u){return this.api.get(this.path+`/${u}/user-authenticators`)}}return e.\u0275fac=function(u){return new(u||e)(d.LFG(x.O))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},1862:(R,b,l)=>{l.d(b,{D:()=>k});var d=l(1877),x=l(2806),f=l(6895),e=l(4006),g=l(7974),u=l(4385),I=l(3626),T=l(2671),v=l(5550),y=l(4650);let E=(()=>{class h{}return h.\u0275fac=function(m){return new(m||h)},h.\u0275mod=y.oAB({type:h}),h.\u0275inj=y.cJS({}),h})();var D=l(990);l(6884);let k=(()=>{class h{}return h.\u0275fac=function(m){return new(m||h)},h.\u0275mod=y.oAB({type:h}),h.\u0275inj=y.cJS({providers:[{provide:d.P3s,useValue:{}}],imports:[e.UX,e.u5,f.ez,d.zyh,d.Qry,D.O,d.T2N,d.KdK,d.nKr,v.LU,x.E,d.IIj,d.YNG,d.CG_,d.OA,T.K,d.V7y,E,I.p0,g.TU,u.LD,d.rgH,d.EoG,d.MfT]}),h})()},6884:(R,b,l)=>{l.d(b,{A:()=>C});var d=l(5861),x=l(2694),f=l(6222),e=l(4650),g=l(1877),u=l(308),I=l(7036),T=l(2162),v=l(4006),y=l(6895),E=l(3616),D=l(6094);function P(m,S){if(1&m&&(e.TgZ(0,"nb-option",21),e._uU(1),e.qZA()),2&m){const s=S.$implicit;e.Q6J("value",s.value),e.xp6(1),e.Oqu(s.value)}}function O(m,S){if(1&m){const s=e.EpF();e.TgZ(0,"div",6)(1,"label",7),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"input",22,23),e.NdJ("ngModelChange",function(p){e.CHM(s);const _=e.oxw();return e.KtG(_.data.amount=p)}),e.qZA()()}if(2&m){const s=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,2,"packages.Count")," * "),e.xp6(2),e.Q6J("ngModel",s.data.amount)}}function k(m,S){if(1&m){const s=e.EpF();e.TgZ(0,"div",24)(1,"div",5)(2,"div",25)(3,"label",7),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"nb-select",26,27),e.NdJ("ngModelChange",function(p){e.CHM(s);const _=e.oxw();return e.KtG(_.data.typeLicense=p)}),e.TgZ(8,"nb-option",21),e._uU(9,"Ph\xfat"),e.qZA(),e.TgZ(10,"nb-option",21),e._uU(11,"Gi\u1edd"),e.qZA(),e.TgZ(12,"nb-option",21),e._uU(13,"Ng\xe0y"),e.qZA()()(),e.TgZ(14,"div",25)(15,"label",7),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"input",28,23),e.NdJ("ngModelChange",function(p){e.CHM(s);const _=e.oxw();return e.KtG(_.data.amount=p)}),e.qZA()()()()}if(2&m){const s=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,8,"packages.TypeTime")," *"),e.xp6(2),e.Q6J("ngModel",s.data.typeLicense),e.xp6(2),e.Q6J("value","minutes"),e.xp6(2),e.Q6J("value","hour"),e.xp6(2),e.Q6J("value","date"),e.xp6(4),e.hij(" ",e.lcZ(17,10,"packages.CountTime")," * "),e.xp6(2),e.Q6J("ngModel",s.data.amount)("disabled",!s.data.typeLicense)}}function h(m,S){if(1&m&&(e.TgZ(0,"nb-option",21),e._uU(1),e.qZA()),2&m){const s=S.$implicit;e.Q6J("value",s.id),e.xp6(1),e.Oqu(s.name)}}let C=(()=>{class m{constructor(s,o,p,_){this.ref=s,this.relyingPartyService=o,this.messageService=p,this.packageService=_,this.listReplyingParty=[],this.packageType=x.yR}ngOnInit(){var s=this;return(0,d.Z)(function*(){yield s.findAllRelyingParty()})()}submit(s){var o=this;return(0,d.Z)(function*(){o.data?.id?yield o.update(s):yield o.create(s),o.close()})()}create(s){var o=this;return(0,d.Z)(function*(){if(s.type===x.yR.TIME){let p=o.changeAmountMillisecond(s.typeLicense);s.amount=s.amount*p}yield o.packageService.createRelyingPartyPackage(s).toPromise().then(()=>{o.messageService.successByType(f.JV),o.close()})})()}update(s){var o=this;return(0,d.Z)(function*(){if(s.type===x.yR.TIME){let p=o.changeAmountMillisecond(s.typeLicense);s.amount=s.amount*p}yield o.packageService.updateRelyingPartyPackage(s,o.data.id).toPromise().then(()=>{o.messageService.successByType(f.wb),o.close()})})()}changeAmountMillisecond(s){let o=0;switch(s){case"second":o=1e3;break;case"minutes":o=6e4;break;case"hour":o=36e5;break;case"date":o=864e5;break;default:o=1}return o}findAllRelyingParty(){var s=this;return(0,d.Z)(function*(){yield s.relyingPartyService.findAllRelyingParty().toPromise().then(o=>{o=o.sort((p,_)=>new Date(_.createdDate).getTime()-new Date(p.createdDate).getTime());for(const p of o)p.filter="";s.listReplyingParty=o.filter(p=>p.status!==x.qb.INACTIVE)})})()}close(){this.ref.close(this.data)}}return m.\u0275fac=function(s){return new(s||m)(e.Y36(g.X4l),e.Y36(u.D),e.Y36(I.e),e.Y36(T.M))},m.\u0275cmp=e.Xpm({type:m,selectors:[["ngx-packages-form"]],inputs:{data:"data"},decls:45,vars:37,consts:[[3,"ngSubmit"],["form","ngForm"],[1,"modal-lg"],[1,"primary"],[1,"col-sm-12"],[1,"row"],[1,"form-group","col-sm-12"],[1,"label"],["fullWidth","","name","type","required","","placeholder","",3,"ngModel","ngModelChange"],["type","ngModel"],[3,"value",4,"ngFor","ngForOf"],["label","type",3,"showRequired"],["class","form-group col-sm-12",4,"ngIf"],["class","col-sm-12 gape-none",4,"ngIf"],["fullWidth","","name","relyingPartyId","required","","placeholder","",3,"ngModel","ngModelChange"],["relyingPartyId","ngModel"],[3,"label","showRequired"],["nbInput","","fullWidth","","maxlength","1000","name","description",3,"ngModel","ngModelChange"],["description","ngModel"],["type","submit","nbButton","","hero","","status","primary",1,"float-right","ml-2",3,"disabled"],["type","button","nbButton","",1,"float-right",3,"click"],[3,"value"],["nbInput","","type","number","fullWidth","","min","1","name","amount",3,"ngModel","ngModelChange"],["amount","ngModel"],[1,"col-sm-12","gape-none"],[1,"form-group","col-sm-6"],["fullWidth","","name","typeLicense","placeholder","",3,"ngModel","ngModelChange"],["typeLicense","ngModel"],["nbInput","","type","number","fullWidth","","min","1","name","amount",3,"ngModel","disabled","ngModelChange"]],template:function(s,o){if(1&s){const p=e.EpF();e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){e.CHM(p);const M=e.MAs(1);return e.KtG(o.submit(M.value))}),e.TgZ(2,"nb-card",2)(3,"nb-card-header")(4,"h5",3),e._uU(5),e.ALo(6,"translate"),e.ALo(7,"translate"),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"nb-card-body")(10,"div",4)(11,"div",5)(12,"div",6)(13,"label",7),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"nb-select",8,9),e.NdJ("ngModelChange",function(M){return o.data.type=M}),e.YNc(18,P,2,2,"nb-option",10),e.ALo(19,"keyvalue"),e.qZA(),e._UZ(20,"ngx-validation-message",11),e.qZA(),e.YNc(21,O,6,4,"div",12),e.YNc(22,k,20,12,"div",13),e.TgZ(23,"div",6)(24,"label",7),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"nb-select",14,15),e.NdJ("ngModelChange",function(M){return o.data.relyingPartyId=M}),e.YNc(29,h,2,2,"nb-option",10),e.qZA(),e._UZ(30,"ngx-validation-message",16),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"div",6)(33,"label",7),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"textarea",17,18),e.NdJ("ngModelChange",function(M){return o.data.description=M}),e.qZA()()()()(),e.TgZ(38,"nb-card-footer")(39,"button",19),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"button",20),e.NdJ("click",function(){return o.close()}),e._uU(43),e.ALo(44,"translate"),e.qZA()()()()}if(2&s){const p=e.MAs(17),_=e.MAs(28);e.xp6(5),e.AsE("",null!=o.data&&o.data.id?e.lcZ(6,17,"Button.Update"):e.lcZ(7,19,"Button.Create")," ",e.lcZ(8,21,"Menu.Packages"),""),e.xp6(9),e.hij("",e.lcZ(15,23,"Global.Type")," *"),e.xp6(2),e.Q6J("ngModel",o.data.type),e.xp6(2),e.Q6J("ngForOf",e.lcZ(19,25,o.packageType)),e.xp6(2),e.Q6J("showRequired",(null==p||null==p.errors?null:p.errors.required)&&p.touched),e.xp6(1),e.Q6J("ngIf","TIME"!==o.data.type),e.xp6(1),e.Q6J("ngIf","TIME"==o.data.type),e.xp6(3),e.hij("",e.lcZ(26,27,"relying.relying-party")," *"),e.xp6(2),e.Q6J("ngModel",o.data.relyingPartyId),e.xp6(2),e.Q6J("ngForOf",o.listReplyingParty),e.xp6(1),e.s9C("label",e.lcZ(31,29,"relying.relying-party")),e.Q6J("showRequired",(null==_||null==_.errors?null:_.errors.required)&&_.touched),e.xp6(4),e.Oqu(e.lcZ(35,31,"Global.Description")),e.xp6(2),e.Q6J("ngModel",o.data.description),e.xp6(4),e.Oqu(e.lcZ(41,33,"Button.Save")),e.xp6(3),e.Oqu(e.lcZ(44,35,"Button.Close"))}},dependencies:[v._Y,v.Fj,v.wV,v.JJ,v.JL,v.Q7,v.nD,v.qQ,v.On,v.F,y.sg,y.O5,g.Asz,g.yKW,g.XWE,g.ndF,g.DPz,g.h8i,g.rs,g.q51,E.C,y.Nd,D.X$],encapsulation:2}),m})()},6257:(R,b,l)=>{l.d(b,{T5:()=>$});var d=l(4080),x=l(445),f=l(4650);let h=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[x.vT]}),n})();var C=l(6895),m=l(4859),S=l(3238),s=l(7392),o=l(2873);l(7340);let A=(()=>{class n{constructor(){this.changes=new o.x,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const J={provide:A,deps:[[new f.FiY,new f.tp0,A]],useFactory:function V(n){return n||new A}};let $=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[J,S.rD],imports:[S.BQ,C.ez,d.eL,m.ot,h,s.Ps,S.si,S.BQ]}),n})()}}]);