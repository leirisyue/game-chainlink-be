"use strict";(self.webpackChunkaccounting=self.webpackChunkaccounting||[]).push([[799],{9799:(_t,q,u)=>{u.r(q),u.d(q,{EndpointModule:()=>ht});var Z=u(8255),A=u(7974),w=u(4385),c=u(3626),M=u(3977),r=u(1877),N=u(2671),k=u(5036),J=u(1862),Y=u(2806),O=u(6257),d=u(4006),C=u(4850),f=u(5880),x=u(589),e=u(4650),h=u(6094),Q=u(2847);let B=(()=>{class n{constructor(t,o){this.translateService=t,this.i18nService=o,this.i18nService.getLocaleLanguage()?(this.i18nService.language=this.i18nService.getLocaleLanguage(),this.translateService.use(this.i18nService.language)):this.i18nService.changeLanguage(this.i18nService.language)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.sK),e.Y36(Q.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ngx-endpoint"]],decls:1,vars:0,template:function(t,o){1&t&&e._UZ(0,"router-outlet")},dependencies:[f.lC]}),n})();var p=u(5861),U=u(5017),y=u(6308);class E{}class F{}var g=u(6222),S=u(9444);let T=(()=>{class n{constructor(t){this.api=t,this.path="endpoint/users"}getAllUserAccount(){return this.api.get(this.path)}getUserAccountById(t){return this.api.get(this.path+`/${t}`)}getAllUserAuthenticator(t){return this.api.get(this.path+`/${t}/authenticators`)}createUserAccount(t){return this.api.post(this.path,t)}deleteUserAccount(t){return this.api.delete(this.path+`/${t}`)}updateUserAuthenticator(t,o,i){return this.api.put(this.path+`/${o}/authenticators/${i}`,t)}deleteUserAuthenticator(t,o){return this.api.delete(this.path+`/${t}/authenticators/${o}`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(S.O))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var v=u(7036),L=u(3616);let I=(()=>{class n{constructor(t,o,i){this.ref=t,this.usersService=o,this.messageService=i,this.dataInput=new F,this.view=!1,this.showPassword=!1}ngOnInit(){console.log(this.data),this.data&&this.data.id&&(this.view=!0)}submit(t){var o=this;return(0,p.Z)(function*(){yield o.create(t),o.close()})()}create(t){var o=this;return(0,p.Z)(function*(){yield o.usersService.createUserAccount(t).toPromise().then(()=>o.messageService.successByType(g.JV))})()}getInputType(){return this.showPassword?"text":"password"}toggleShowPassword(){this.showPassword=!this.showPassword}close(){this.ref.close(this.data)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.X4l),e.Y36(T),e.Y36(v.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ngx-users-form"]],inputs:{data:"data"},decls:44,vars:43,consts:[[3,"ngSubmit"],["form","ngForm"],[1,"modal-lg"],[1,"primary"],[1,"row"],[1,"form-group","col-sm-12"],[1,"label"],["nbInput","","fullWidth","","name","username",3,"ngModel","disabled","ngModelChange"],["username","ngModel"],[3,"label","showRequired"],["nbInput","","fullWidth","","name","displayName",3,"ngModel","disabled","ngModelChange"],["displayName","ngModel"],["hidden","",1,"form-group","col-sm-12"],["nbInput","","fullWidth","","id","input-password","name","password",3,"type","ngModel","status","disabled","ngModelChange"],["password","ngModel"],["nbSuffix","","nbButton","","ghost","","type","button",3,"click"],["pack","eva",3,"icon"],["type","submit","nbButton","","hero","","status","primary",1,"float-right","ml-2",3,"disabled"],["type","button","nbButton","",1,"float-right",3,"click"]],template:function(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){e.CHM(i);const l=e.MAs(1);return e.KtG(o.submit(l.value))}),e.TgZ(2,"nb-card",2)(3,"nb-card-header")(4,"h5",3),e._uU(5),e.ALo(6,"translate"),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"nb-card-body")(9,"div",4)(10,"div",5)(11,"label",6),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"input",7,8),e.NdJ("ngModelChange",function(l){return o.data.userLogin=l}),e.qZA(),e._UZ(16,"ngx-validation-message",9),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",5)(19,"label",6),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"input",10,11),e.NdJ("ngModelChange",function(l){return o.data.displayName=l}),e.qZA(),e._UZ(24,"ngx-validation-message",9),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"div",12)(27,"label",6),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"nb-form-field")(31,"input",13,14),e.NdJ("ngModelChange",function(l){return o.data.password=l}),e.qZA(),e.TgZ(33,"button",15),e.NdJ("click",function(){return o.toggleShowPassword()}),e._UZ(34,"nb-icon",16),e.qZA()(),e._UZ(35,"ngx-validation-message",9),e.ALo(36,"translate"),e.qZA()()(),e.TgZ(37,"nb-card-footer")(38,"button",17),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"button",18),e.NdJ("click",function(){return o.close()}),e._uU(42),e.ALo(43,"translate"),e.qZA()()()()}if(2&t){const i=e.MAs(15),s=e.MAs(23),l=e.MAs(32);e.xp6(5),e.hij("",null!=o.data&&o.data.id?e.lcZ(6,23,"Button.Update"):e.lcZ(7,25,"Button.Create")," Ng\u01b0\u1eddi d\xf9ng"),e.xp6(7),e.hij("",e.lcZ(13,27,"Global.userLogin")," "),e.xp6(2),e.Q6J("ngModel",o.data.userLogin)("disabled",o.view),e.xp6(2),e.s9C("label",e.lcZ(17,29,"Global.userLogin")),e.Q6J("showRequired",(null==i||null==i.errors?null:i.errors.required)&&i.touched),e.xp6(4),e.hij("",e.lcZ(21,31,"Global.displayName")," "),e.xp6(2),e.Q6J("ngModel",o.data.displayName)("disabled",o.view),e.xp6(2),e.s9C("label",e.lcZ(25,33,"Global.displayName")),e.Q6J("showRequired",(null==s||null==s.errors?null:s.errors.required)&&s.touched),e.xp6(4),e.hij("",e.lcZ(29,35,"Global.Password")," "),e.xp6(3),e.Q6J("type",o.getInputType())("ngModel",o.data.password)("status",l.dirty?l.invalid?"danger":"success":"basic")("disabled",o.view),e.xp6(3),e.Q6J("icon",o.showPassword?"eye-outline":"eye-off-2-outline"),e.uIk("aria-label",o.showPassword?"hide password":"show password"),e.xp6(1),e.s9C("label",e.lcZ(36,37,"Global.Password")),e.Q6J("showRequired",(null==l||null==l.errors?null:l.errors.required)&&l.touched),e.xp6(3),e.Q6J("disabled",o.view),e.xp6(1),e.Oqu(e.lcZ(40,39,"Button.Save")),e.xp6(3),e.Oqu(e.lcZ(43,41,"Button.Close"))}},dependencies:[r.Asz,r.yKW,r.XWE,r.ndF,r.DPz,r.fMN,d._Y,d.Fj,d.JJ,d.JL,d.On,d.F,r.h8i,L.C,r.jBG,r.yyc,h.X$]}),n})();var _=u(6895);function $(n,a){1&n&&(e.TgZ(0,"th",26),e._uU(1,"STT"),e.qZA())}function G(n,a){if(1&n&&(e.TgZ(0,"td",27),e._uU(1),e.qZA()),2&n){const t=a.index,o=e.oxw();e.xp6(1),e.hij(" ",o.paginator.pageIndex*o.paginator.pageSize+t+1," ")}}function j(n,a){1&n&&(e.TgZ(0,"th",26),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"User.userHandle")))}function R(n,a){if(1&n&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("nbTooltip",t.userHandle),e.xp6(1),e.Oqu(t.userHandle)}}function H(n,a){1&n&&(e.TgZ(0,"th",26),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Global.userLogin")))}function K(n,a){if(1&n&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("nbTooltip",t.userLogin),e.xp6(1),e.Oqu(t.userLogin)}}function P(n,a){1&n&&(e.TgZ(0,"th",26),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Global.userEmail")))}function z(n,a){if(1&n&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("nbTooltip",t.userEmail),e.xp6(1),e.Oqu(t.origin)}}function V(n,a){1&n&&(e.TgZ(0,"th",26),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Global.displayName")))}function W(n,a){if(1&n&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("nbTooltip",t.displayName),e.xp6(1),e.Oqu(t.displayName)}}function X(n,a){1&n&&(e.TgZ(0,"th",26),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Date.createdDate")))}function ee(n,a){if(1&n&&(e.TgZ(0,"td",28),e.ALo(1,"date"),e._uU(2),e.ALo(3,"date"),e.qZA()),2&n){const t=a.$implicit;e.s9C("nbTooltip",e.xi3(1,2,t.createdDate,"dd/MM/yyyy hh:mm:ss ")),e.xp6(2),e.hij(" ",e.xi3(3,5,t.createdDate,"dd/MM/yyyy hh:mm:ss "),"")}}function te(n,a){1&n&&(e.TgZ(0,"th",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Global.Option")))}function ne(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",27)(1,"div",30)(2,"button",31),e._UZ(3,"nb-icon",32),e.qZA(),e.TgZ(4,"mat-menu",null,33)(6,"button",34),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.openFormView(s.id))}),e.TgZ(7,"span"),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"button",34),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.openForm(s))}),e.TgZ(11,"span"),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"button",34),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.deleteUserAccount(null==s?null:s.id))}),e.TgZ(15,"span"),e._uU(16),e.ALo(17,"translate"),e.qZA()()()()()}if(2&n){const t=e.MAs(5);e.xp6(2),e.Q6J("matMenuTriggerFor",t),e.xp6(6),e.Oqu(e.lcZ(9,4,"Button.ViewDevice")),e.xp6(4),e.Oqu(e.lcZ(13,6,"Button.Info")),e.xp6(4),e.Oqu(e.lcZ(17,8,"Button.DeleteUser"))}}function oe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"input",42),e.NdJ("change",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(i?s.masterToggle():null)}),e.qZA(),e._UZ(2,"i",43),e.qZA()}if(2&n){e.oxw();const t=e.MAs(3),o=e.oxw();e.xp6(1),e.Q6J("checked",o.selection.hasValue()&&o.isAllSelected())("indeterminate",o.selection.hasValue()&&!o.isAllSelected()),e.xp6(1),e.Q6J("matMenuTriggerFor",t)}}function ie(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(i){return e.CHM(t),e.oxw(2).deleteAll(),e.KtG(i.stopPropagation())}),e._UZ(1,"i",45),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()}2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"Button.Delete")))}function ae(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"th",29),e.YNc(1,oe,3,3,"div",35),e.TgZ(2,"mat-menu",null,36)(4,"button",37),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"button",38),e.NdJ("click",function(i){return e.CHM(t),e.oxw().masterToggle(),e.KtG(i.stopPropagation())}),e._UZ(8,"i",39),e.TgZ(9,"span"),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"button",38),e.NdJ("click",function(i){return e.CHM(t),e.oxw().selection.clear(),e.KtG(i.stopPropagation())}),e._UZ(13,"i",40),e.TgZ(14,"span"),e._uU(15),e.ALo(16,"translate"),e.qZA()(),e.YNc(17,ie,5,3,"button",41),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.dataSource.filteredData.length>1),e.xp6(3),e.Q6J("hidden",!t.selection.hasValue()),e.xp6(1),e.AsE(" ",t.selection.selected.length," ",e.lcZ(6,9,"Global.RowsSelected")," "),e.xp6(2),e.Q6J("hidden",t.isAllSelected()),e.xp6(3),e.Oqu(e.lcZ(11,11,"Button.SelectAll")),e.xp6(2),e.Q6J("hidden",!t.isAllSelected()),e.xp6(3),e.Oqu(e.lcZ(16,13,"Button.DeselectAll")),e.xp6(2),e.Q6J("ngIf",t.selection.hasValue())}}function se(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"input",47),e.NdJ("change",function(i){e.CHM(t);const s=e.oxw().$implicit,l=e.oxw();return e.KtG(i?l.selection.toggle(s):null)}),e.qZA()}if(2&n){const t=e.oxw().$implicit,o=e.oxw();e.Q6J("checked",o.selection.isSelected(t))}}function re(n,a){if(1&n&&(e.TgZ(0,"td",27),e.YNc(1,se,1,1,"input",46),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.dataSource.filteredData.length>0)}}function le(n,a){1&n&&e._UZ(0,"tr",48)}function ce(n,a){1&n&&e._UZ(0,"tr",49)}function ue(n,a){1&n&&(e.TgZ(0,"div",50),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Message.NoData")," "))}const de=function(){return[10,20,50,100]};let pe=(()=>{class n{constructor(t,o,i,s,l,m){this.usersService=t,this.dialogService=o,this.translateService=i,this.nbMenuService=s,this.messageService=l,this.router=m,this.displayedColumns=["id","userLogin","displayName","createdDate","option"],this.dataSource=new c.by,this.selection=new U.Ov(!0,[])}ngOnInit(){var t=this;return(0,p.Z)(function*(){yield t.findAll()})()}findAll(){var t=this;return(0,p.Z)(function*(){t.selection.clear(),t.dataSource.sort=t.sort,t.dataSource.paginator=t.paginator,yield t.usersService.getAllUserAccount().toPromise().then(o=>{o=o.sort((i,s)=>new Date(s.createdDate).getTime()-new Date(i.createdDate).getTime());for(const i of o)i.filter="";t.dataSource.sort=t.sort,t.dataSource.paginator=t.paginator,t.dataSource.data=o})})()}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(t=>this.selection.select(t))}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}doFilter(t){this.dataSource.filter=t.trim().toLocaleLowerCase()}onClickContextMenu(){this.sub=this.nbMenuService.onItemClick().subscribe(t=>{t.item.id===g.wb?this.openForm(t.tag.id):t.item.id===g.yY?this.deleteUserAccount(t.tag.id):t.item.id===g.t3&&this.router.navigateByUrl(`pages/endpoint/users-authenticators/${t.tag.id}`)})}openFormView(t){this.router.navigateByUrl(`pages/endpoint/users-authenticators/${t}`)}openForm(t){this.dialogService.open(I,{context:{data:t||new E},closeOnBackdropClick:!1}).onClose.subscribe(()=>this.findAll())}deleteUserAccount(t){var o=this;return(0,p.Z)(function*(){(yield o.messageService.getSwal('B\u1ea1n mu\u1ed1n x\xf3a ng\u01b0\u1eddi d\xf9ng n\xe0y? <br> "T\u1ea5t c\u1ea3 thi\u1ebft b\u1ecb c\u1ee7a ng\u01b0\u1eddi d\xf9ng n\xe0y c\u0169ng s\u1ebd b\u1ecb x\xf3a kh\u1ecfi h\u1ec7 th\u1ed1ng"'))&&(yield o.usersService.deleteUserAccount(t).toPromise().then(()=>{o.messageService.successByType(g.yY),o.findAll()}))})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T),e.Y36(r.Gln),e.Y36(h.sK),e.Y36(r.kkI),e.Y36(v.e),e.Y36(f.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ngx-users"]],viewQuery:function(t,o){if(1&t&&(e.Gf(y.YE,5),e.Gf(A.NW,5)),2&t){let i;e.iGM(i=e.CRH())&&(o.sort=i.first),e.iGM(i=e.CRH())&&(o.paginator=i.first)}},decls:49,vars:16,consts:[[1,"col-sm-12"],[1,"row","align-items-center"],[1,"flex-1","text-uppercase"],["nbButton","","hero","","status","primary",1,"m-1",3,"click"],["showFirstLastButtons","",1,"float-right",3,"pageSizeOptions","pageSize"],[1,"col-sm-6","gap-none"],[1,"row"],[1,"form-group","col-sm-6"],["nbPrefix","","icon","search-outline","pack","eva"],["nbInput","","status","primary",3,"placeholder","keyup"],["id","matTable","mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","userHandle"],["mat-cell","",3,"nbTooltip",4,"matCellDef"],["matColumnDef","userLogin"],["matColumnDef","userEmail"],["matColumnDef","displayName"],["matColumnDef","createdDate"],["matColumnDef","option"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","select"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","text-center",4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-cell","",3,"nbTooltip"],["mat-header-cell",""],[2,"right","0"],["nbButton","","ghost","",3,"matMenuTriggerFor"],["icon","more-vertical-outline"],["menuUser","matMenu"],["mat-menu-item","",1,"text-center","min-width-160",3,"click"],[4,"ngIf"],["menu","matMenu"],["mat-menu-item","","disabled","",3,"hidden"],["mat-menu-item","",3,"hidden","click"],[1,"fa","fa-check-square-o","text-primary","pr-2","fs-20"],[1,"fa","fa-minus-circle","text-secondary","pr-2","fs-20"],["mat-menu-item","",3,"click",4,"ngIf"],["type","checkbox",3,"checked","indeterminate","change"],[1,"fa","fa-angle-down","cursor-pointer","ml-1",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"fa","fa-trash","text-danger","pr-2","fs-20"],["type","checkbox",3,"checked","change",4,"ngIf"],["type","checkbox",3,"checked","change"],["mat-header-row",""],["mat-row",""],[1,"text-center"]],template:function(t,o){1&t&&(e.TgZ(0,"nb-card")(1,"nb-card-header")(2,"div",0)(3,"div",1)(4,"h6",2),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div")(8,"button",3),e.NdJ("click",function(){return o.openForm()}),e._uU(9),e.ALo(10,"translate"),e.qZA()()()()(),e.TgZ(11,"nb-card-body")(12,"div"),e._UZ(13,"mat-paginator",4),e.TgZ(14,"div",5)(15,"div",6)(16,"div",7)(17,"nb-form-field"),e._UZ(18,"nb-icon",8),e.TgZ(19,"input",9),e.NdJ("keyup",function(s){return o.doFilter(s.target.value)}),e.ALo(20,"translate"),e.qZA()()()()()(),e.TgZ(21,"table",10),e.ynx(22,11),e.YNc(23,$,2,0,"th",12),e.YNc(24,G,2,1,"td",13),e.BQk(),e.ynx(25,14),e.YNc(26,j,3,3,"th",12),e.YNc(27,R,2,2,"td",15),e.BQk(),e.ynx(28,16),e.YNc(29,H,3,3,"th",12),e.YNc(30,K,2,2,"td",15),e.BQk(),e.ynx(31,17),e.YNc(32,P,3,3,"th",12),e.YNc(33,z,2,2,"td",15),e.BQk(),e.ynx(34,18),e.YNc(35,V,3,3,"th",12),e.YNc(36,W,2,2,"td",15),e.BQk(),e.ynx(37,19),e.YNc(38,X,3,3,"th",12),e.YNc(39,ee,4,8,"td",15),e.BQk(),e.ynx(40,20),e.YNc(41,te,3,3,"th",21),e.YNc(42,ne,18,10,"td",13),e.BQk(),e.ynx(43,22),e.YNc(44,ae,18,15,"th",21),e.YNc(45,re,2,1,"td",13),e.BQk(),e.YNc(46,le,1,0,"tr",23),e.YNc(47,ce,1,0,"tr",24),e.qZA(),e.YNc(48,ue,3,3,"div",25),e.qZA()()),2&t&&(e.xp6(5),e.hij(" ",e.lcZ(6,9,"User.UserTable")," "),e.xp6(4),e.Oqu(e.lcZ(10,11,"Button.Create")),e.xp6(4),e.Q6J("pageSizeOptions",e.DdM(15,de))("pageSize",10),e.xp6(6),e.s9C("placeholder",e.lcZ(20,13,"Global.Search")),e.xp6(2),e.Q6J("dataSource",o.dataSource),e.xp6(25),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("ngIf",o.dataSource.data.length<1))},dependencies:[_.O5,r.Asz,r.yKW,r.ndF,r.DPz,r.fMN,Z.VK,Z.OP,Z.p6,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,A.NW,r.h8i,r.jNv,r.jBG,r.t3q,_.uU,h.X$]}),n})(),me=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["ngx-assertion"]],decls:2,vars:0,template:function(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"assertion works!"),e.qZA())}}),n})();class ge{}class he{}let _e=(()=>{class n{constructor(t,o,i,s){this.ref=t,this.usersService=o,this.messageService=i,this.activatedRoute=s,this.paramIdUser=null}ngOnInit(){}submit(t){var o=this;return(0,p.Z)(function*(){yield o.update(),o.close()})()}update(){var t=this;return(0,p.Z)(function*(){let o=new he;o.name=t.data.name,yield t.usersService.updateUserAuthenticator(o,t.data.UserId,t.data.id).toPromise().then(()=>t.messageService.successByType(g.wb))})()}close(){this.ref.close(this.data)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.X4l),e.Y36(T),e.Y36(v.e),e.Y36(f.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ngx-users-auth-form"]],inputs:{data:"data"},decls:78,vars:49,consts:[[3,"ngSubmit"],["form","ngForm"],[1,"modal-lg"],[1,"primary"],[1,"row"],[1,"form-group","col-sm-12"],[1,"label"],["nbInput","","fullWidth","","name","name",3,"ngModel","ngModelChange"],["name","ngModel"],[1,"col-sm-12"],[1,"p-10-bottom"],[1,"col-sm-12","p-0","m-0"],[1,"col-sm-12","row","p-0","m-0"],[1,"details-border"],[1,"col-sm-12","row","pt-2","pb-2"],[1,"col-md-3","col-sm-12","text-md-right"],[1,"col-md-9","col-sm-12"],[1,"col-md-9","col-sm-12",2,"line-break","anywhere"],["type","submit","nbButton","","hero","","status","primary",1,"float-right","ml-2",3,"disabled"],["type","button","nbButton","",1,"float-right",3,"click"]],template:function(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){e.CHM(i);const l=e.MAs(1);return e.KtG(o.submit(l.value))}),e.TgZ(2,"nb-card",2)(3,"nb-card-header")(4,"h5",3),e._uU(5),e.ALo(6,"translate"),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"nb-card-body")(9,"div",4)(10,"div",5)(11,"label",6),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"input",7,8),e.NdJ("ngModelChange",function(l){return o.data.name=l}),e.qZA()(),e.TgZ(16,"div",9)(17,"div",10)(18,"div",11)(19,"div",12)(20,"div",13)(21,"div",14)(22,"div",15),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"div",16),e._uU(26),e.qZA()(),e._UZ(27,"mat-divider"),e.TgZ(28,"div",14)(29,"div",15),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"div",17),e._uU(33),e.qZA()(),e._UZ(34,"mat-divider"),e.TgZ(35,"div",14)(36,"div",15),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"div",16),e._uU(40),e.qZA()(),e._UZ(41,"mat-divider"),e.TgZ(42,"div",14)(43,"div",15),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"div",16),e._uU(47),e.qZA()(),e._UZ(48,"mat-divider"),e.TgZ(49,"div",14)(50,"div",15),e._uU(51),e.ALo(52,"translate"),e.qZA(),e.TgZ(53,"div",16),e._uU(54),e.qZA()(),e._UZ(55,"mat-divider"),e.TgZ(56,"div",14)(57,"div",15),e._uU(58),e.ALo(59,"translate"),e.qZA(),e.TgZ(60,"div",16),e._uU(61),e.ALo(62,"date"),e.qZA()(),e._UZ(63,"mat-divider"),e.TgZ(64,"div",14)(65,"div",15),e._uU(66),e.ALo(67,"translate"),e.qZA(),e.TgZ(68,"div",16),e._uU(69),e.ALo(70,"date"),e.qZA()()()()()()()()(),e.TgZ(71,"nb-card-footer")(72,"button",18),e._uU(73),e.ALo(74,"translate"),e.qZA(),e.TgZ(75,"button",19),e.NdJ("click",function(){return o.close()}),e._uU(76),e.ALo(77,"translate"),e.qZA()()()()}2&t&&(e.xp6(5),e.hij("",null!=o.data&&o.data.id?e.lcZ(6,19,"Button.Update"):e.lcZ(7,21,"Button.Create")," updateUserAuthenticator"),e.xp6(7),e.hij("",e.lcZ(13,23,"User.nameDriver")," *"),e.xp6(2),e.Q6J("ngModel",o.data.name),e.xp6(9),e.Oqu(e.lcZ(24,25,"User.aaguid")),e.xp6(3),e.Oqu(o.data.aaguid),e.xp6(4),e.hij("",e.lcZ(31,27,"User.coseKey")," "),e.xp6(3),e.Oqu(o.data.coseKey),e.xp6(4),e.hij("",e.lcZ(38,29,"User.counter")," "),e.xp6(3),e.Oqu(o.data.counter),e.xp6(4),e.hij("",e.lcZ(45,31,"User.credentialId")," "),e.xp6(3),e.Oqu(o.data.credentialId),e.xp6(4),e.Oqu(e.lcZ(52,33,"User.attestationFormat")),e.xp6(3),e.Oqu(o.data.format),e.xp6(4),e.Oqu(e.lcZ(59,35,"Date.lastAccess")),e.xp6(3),e.Oqu(e.xi3(62,37,o.data.lastAccess,"dd/MM/yyyy hh:mm:ss ")),e.xp6(5),e.hij("",e.lcZ(67,40,"Date.createdDate")," "),e.xp6(3),e.Oqu(e.xi3(70,42,o.data.createdDate,"dd/MM/yyyy hh:mm:ss ")),e.xp6(4),e.Oqu(e.lcZ(74,45,"Button.Save")),e.xp6(3),e.Oqu(e.lcZ(77,47,"Button.Close")))},dependencies:[r.Asz,r.yKW,r.XWE,r.ndF,r.DPz,d._Y,d.Fj,d.JJ,d.JL,d.On,d.F,r.h8i,C.d,_.uU,h.X$]}),n})();function fe(n,a){1&n&&(e.TgZ(0,"th",27),e._uU(1,"STT"),e.qZA())}function Ze(n,a){if(1&n&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&n){const t=a.index,o=e.oxw();e.xp6(1),e.hij(" ",o.paginator.pageIndex*o.paginator.pageSize+t+1," ")}}function Ae(n,a){1&n&&(e.TgZ(0,"th",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"User.nameDriver")))}function Te(n,a){if(1&n&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("nbTooltip",t.name),e.xp6(1),e.Oqu(t.name)}}function ve(n,a){1&n&&(e.TgZ(0,"th",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"User.credentialId")))}function xe(n,a){if(1&n&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("nbTooltip",t.credentialId),e.xp6(1),e.Oqu(t.credentialId)}}function Ce(n,a){1&n&&(e.TgZ(0,"th",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"User.counter")))}function Ue(n,a){if(1&n&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("nbTooltip",t.counter),e.xp6(1),e.Oqu(t.counter)}}function ye(n,a){1&n&&(e.TgZ(0,"th",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"User.coseKey")))}function be(n,a){if(1&n&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("nbTooltip",t.coseKey),e.xp6(1),e.Oqu(t.coseKey)}}function qe(n,a){1&n&&(e.TgZ(0,"th",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Date.createdDate")))}function Se(n,a){if(1&n&&(e.TgZ(0,"td",29),e.ALo(1,"date"),e._uU(2),e.ALo(3,"date"),e.qZA()),2&n){const t=a.$implicit;e.s9C("nbTooltip",e.xi3(1,2,t.createdDate,"dd/MM/yyyy hh:mm:ss ")),e.xp6(2),e.hij(" ",e.xi3(3,5,t.createdDate,"dd/MM/yyyy hh:mm:ss "),"")}}function Le(n,a){1&n&&(e.TgZ(0,"th",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Date.lastAccess")))}function De(n,a){if(1&n&&(e.TgZ(0,"td",29),e.ALo(1,"date"),e._uU(2),e.ALo(3,"date"),e.qZA()),2&n){const t=a.$implicit;e.s9C("nbTooltip",e.xi3(1,2,t.lastAccess,"dd/MM/yyyy hh:mm:ss ")),e.xp6(2),e.hij(" ",e.xi3(3,5,t.lastAccess,"dd/MM/yyyy hh:mm:ss "),"")}}function we(n,a){1&n&&(e.TgZ(0,"th",30),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Global.Option")))}function Me(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",28)(1,"div",31)(2,"button",32),e._UZ(3,"nb-icon",33),e.qZA(),e.TgZ(4,"mat-menu",null,34)(6,"button",35),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.openForm(s))}),e.TgZ(7,"span"),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"button",35),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.deleteUserAccount(null==s?null:s.id))}),e.TgZ(11,"span"),e._uU(12),e.ALo(13,"translate"),e.qZA()()()()()}if(2&n){const t=e.MAs(5);e.xp6(2),e.Q6J("matMenuTriggerFor",t),e.xp6(6),e.Oqu(e.lcZ(9,3,"Button.VIEWDETAIL")),e.xp6(4),e.Oqu(e.lcZ(13,5,"Button.DeleteDevice"))}}function Ne(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"input",43),e.NdJ("change",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(i?s.masterToggle():null)}),e.qZA(),e._UZ(2,"i",44),e.qZA()}if(2&n){e.oxw();const t=e.MAs(3),o=e.oxw();e.xp6(1),e.Q6J("checked",o.selection.hasValue()&&o.isAllSelected())("indeterminate",o.selection.hasValue()&&!o.isAllSelected()),e.xp6(1),e.Q6J("matMenuTriggerFor",t)}}function ke(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(i){return e.CHM(t),e.oxw(2).deleteAll(),e.KtG(i.stopPropagation())}),e._UZ(1,"i",46),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()}2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"Button.Delete")))}function Je(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"th",30),e.YNc(1,Ne,3,3,"div",36),e.TgZ(2,"mat-menu",null,37)(4,"button",38),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"button",39),e.NdJ("click",function(i){return e.CHM(t),e.oxw().masterToggle(),e.KtG(i.stopPropagation())}),e._UZ(8,"i",40),e.TgZ(9,"span"),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"button",39),e.NdJ("click",function(i){return e.CHM(t),e.oxw().selection.clear(),e.KtG(i.stopPropagation())}),e._UZ(13,"i",41),e.TgZ(14,"span"),e._uU(15),e.ALo(16,"translate"),e.qZA()(),e.YNc(17,ke,5,3,"button",42),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.dataSource.filteredData.length>1),e.xp6(3),e.Q6J("hidden",!t.selection.hasValue()),e.xp6(1),e.AsE(" ",t.selection.selected.length," ",e.lcZ(6,9,"Global.RowsSelected")," "),e.xp6(2),e.Q6J("hidden",t.isAllSelected()),e.xp6(3),e.Oqu(e.lcZ(11,11,"Button.SelectAll")),e.xp6(2),e.Q6J("hidden",!t.isAllSelected()),e.xp6(3),e.Oqu(e.lcZ(16,13,"Button.DeselectAll")),e.xp6(2),e.Q6J("ngIf",t.selection.hasValue())}}function Ye(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"input",48),e.NdJ("change",function(i){e.CHM(t);const s=e.oxw().$implicit,l=e.oxw();return e.KtG(i?l.selection.toggle(s):null)}),e.qZA()}if(2&n){const t=e.oxw().$implicit,o=e.oxw();e.Q6J("checked",o.selection.isSelected(t))}}function Oe(n,a){if(1&n&&(e.TgZ(0,"td",28),e.YNc(1,Ye,1,1,"input",47),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.dataSource.filteredData.length>0)}}function Qe(n,a){1&n&&e._UZ(0,"tr",49)}function Be(n,a){1&n&&e._UZ(0,"tr",50)}function Ee(n,a){1&n&&(e.TgZ(0,"div",51),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Message.NoData")," "))}const Fe=function(){return[10,20,50,100]};let Ie=(()=>{class n{constructor(t,o,i,s,l,m,b){this.usersService=t,this.messageService=o,this.activatedRoute=i,this.dialogService=s,this.translateService=l,this.nbMenuService=m,this.router=b,this.paramId=null,this.displayedColumns=["id","name","counter","createdDate","lastAccess","option"],this.dataSource=new c.by,this.selection=new U.Ov(!0,[])}ngOnInit(){var t=this;this.activatedRoute.params.subscribe(function(){var o=(0,p.Z)(function*(i){t.paramId=i.id});return function(i){return o.apply(this,arguments)}}()),this.paramId&&this.getAllUserAuthenticator()}getAllUserAuthenticator(){var t=this;return(0,p.Z)(function*(){yield t.usersService.getAllUserAuthenticator(t.paramId).toPromise().then(o=>{o=o.sort((i,s)=>new Date(s.createdDate).getTime()-new Date(i.createdDate).getTime()),t.data=o,t.dataSource.sort=t.sort,t.dataSource.paginator=t.paginator,t.dataSource.data=o})})()}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(t=>this.selection.select(t))}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}doFilter(t){this.dataSource.filter=t.trim().toLocaleLowerCase()}openForm(t){t.UserId=this.paramId,this.dialogService.open(_e,{context:{data:t||new ge},closeOnBackdropClick:!1}).onClose.subscribe(()=>this.getAllUserAuthenticator())}deleteUserAccount(t){var o=this;return(0,p.Z)(function*(){yield o.usersService.deleteUserAccount(t).toPromise().then(()=>{o.messageService.successByType(g.yY)})})()}close(){this.router.navigateByUrl("pages/endpoint/users")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T),e.Y36(v.e),e.Y36(f.gz),e.Y36(r.Gln),e.Y36(h.sK),e.Y36(r.kkI),e.Y36(f.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ngx-users-auth"]],viewQuery:function(t,o){if(1&t&&(e.Gf(y.YE,5),e.Gf(A.NW,5)),2&t){let i;e.iGM(i=e.CRH())&&(o.sort=i.first),e.iGM(i=e.CRH())&&(o.paginator=i.first)}},decls:51,vars:16,consts:[[1,"col-sm-12"],[1,"row","align-items-center"],[1,"flex-1","text-uppercase"],["showFirstLastButtons","",1,"float-right",3,"pageSizeOptions","pageSize"],[1,"col-sm-4","gap-none"],["nbPrefix","","icon","search-outline","pack","eva"],["nbInput","","status","primary",3,"placeholder","keyup"],["id","matTable","mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","",3,"nbTooltip",4,"matCellDef"],["matColumnDef","credentialId"],["matColumnDef","counter"],["matColumnDef","coseKey"],["matColumnDef","createdDate"],["matColumnDef","lastAccess"],["matColumnDef","option"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","select"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","text-center",4,"ngIf"],[1,"col-sm-12","pt-3"],[1,"text-right"],["type","button","nbButton","",1,"float-right",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-cell","",3,"nbTooltip"],["mat-header-cell",""],[2,"right","0"],["nbButton","","ghost","",3,"matMenuTriggerFor"],["icon","more-vertical-outline"],["menuUserAuth","matMenu"],["mat-menu-item","",1,"text-center","min-width-160",3,"click"],[4,"ngIf"],["menu","matMenu"],["mat-menu-item","","disabled","",3,"hidden"],["mat-menu-item","",3,"hidden","click"],[1,"fa","fa-check-square-o","text-primary","pr-2","fs-20"],[1,"fa","fa-minus-circle","text-secondary","pr-2","fs-20"],["mat-menu-item","",3,"click",4,"ngIf"],["type","checkbox",3,"checked","indeterminate","change"],[1,"fa","fa-angle-down","cursor-pointer","ml-1",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"fa","fa-trash","text-danger","pr-2","fs-20"],["type","checkbox",3,"checked","change",4,"ngIf"],["type","checkbox",3,"checked","change"],["mat-header-row",""],["mat-row",""],[1,"text-center"]],template:function(t,o){1&t&&(e.TgZ(0,"nb-card")(1,"nb-card-header")(2,"div",0)(3,"div",1)(4,"h6",2),e._uU(5),e.ALo(6,"translate"),e.qZA()()()(),e.TgZ(7,"nb-card-body")(8,"div"),e._UZ(9,"mat-paginator",3),e.TgZ(10,"div",4)(11,"nb-form-field"),e._UZ(12,"nb-icon",5),e.TgZ(13,"input",6),e.NdJ("keyup",function(s){return o.doFilter(s.target.value)}),e.ALo(14,"translate"),e.qZA()()()(),e.TgZ(15,"table",7),e.ynx(16,8),e.YNc(17,fe,2,0,"th",9),e.YNc(18,Ze,2,1,"td",10),e.BQk(),e.ynx(19,11),e.YNc(20,Ae,3,3,"th",9),e.YNc(21,Te,2,2,"td",12),e.BQk(),e.ynx(22,13),e.YNc(23,ve,3,3,"th",9),e.YNc(24,xe,2,2,"td",12),e.BQk(),e.ynx(25,14),e.YNc(26,Ce,3,3,"th",9),e.YNc(27,Ue,2,2,"td",12),e.BQk(),e.ynx(28,15),e.YNc(29,ye,3,3,"th",9),e.YNc(30,be,2,2,"td",12),e.BQk(),e.ynx(31,16),e.YNc(32,qe,3,3,"th",9),e.YNc(33,Se,4,8,"td",12),e.BQk(),e.ynx(34,17),e.YNc(35,Le,3,3,"th",9),e.YNc(36,De,4,8,"td",12),e.BQk(),e.ynx(37,18),e.YNc(38,we,3,3,"th",19),e.YNc(39,Me,14,7,"td",10),e.BQk(),e.ynx(40,20),e.YNc(41,Je,18,15,"th",19),e.YNc(42,Oe,2,1,"td",10),e.BQk(),e.YNc(43,Qe,1,0,"tr",21),e.YNc(44,Be,1,0,"tr",22),e.qZA(),e.YNc(45,Ee,3,3,"div",23),e.TgZ(46,"div",24)(47,"div",25)(48,"button",26),e.NdJ("click",function(){return o.close()}),e._uU(49),e.ALo(50,"translate"),e.qZA()()()()()),2&t&&(e.xp6(5),e.hij(" ",e.lcZ(6,9,"User.authenticatorsTable")," "),e.xp6(4),e.Q6J("pageSizeOptions",e.DdM(15,Fe))("pageSize",10),e.xp6(4),e.s9C("placeholder",e.lcZ(14,11,"Global.Search")),e.xp6(2),e.Q6J("dataSource",o.dataSource),e.xp6(28),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("ngIf",o.dataSource.data.length<1),e.xp6(4),e.Oqu(e.lcZ(50,13,"Button.Close")))},dependencies:[_.O5,r.Asz,r.yKW,r.ndF,r.DPz,r.fMN,Z.VK,Z.OP,Z.p6,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,A.NW,r.h8i,r.jNv,r.jBG,r.t3q,_.uU,h.X$]}),n})();var D=u(2694);let $e=(()=>{class n{constructor(t){this.api=t,this.path="endpoint/events"}getLogEvent(t,o){return t&&(t=this.convertDateToTime(t)),o&&(o=this.convertDateToTime(o)),t&&typeof t<"u"&&0!==t&&(t="start="+t),o&&void 0!==o&&0!==o&&(o="&end="+o),this.api.get(`${this.path}?${t}${o}`)}getLogEventByName(t,o,i){if(o&&(o=this.convertDateToTime(o)),i&&(i=this.convertDateToTime(i)),o&&typeof o<"u"&&0!==o&&(o="?start="+o),i&&void 0!==i&&0!==i&&(i="&end="+i),t)return this.api.get(`${this.path}/name/${t}${o}${i}`)}getLogEventByType(t,o,i){if(o&&(o=this.convertDateToTime(o)),i&&(i=this.convertDateToTime(i)),o&&typeof o<"u"&&0!==o&&(o="?start="+o),i&&void 0!==i&&0!==i&&(i="&end="+i),t)return this.api.get(`${this.path}/type/${t}${o}${i}`)}getLogEventByUser(t,o,i){if(o&&(o=this.convertDateToTime(o)),i&&(i=this.convertDateToTime(i)),o&&typeof o<"u"&&0!==o&&(o="?start="+o),i&&void 0!==i&&0!==i&&(i="&end="+i),t)return this.api.get(`${this.path}/user/${t}${o}${i}`)}convertDateToTime(t){return new Date(t).getTime()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(S.O))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ge(n,a){if(1&n&&(e.TgZ(0,"nb-option",10),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",e.lcZ(2,2,"Event."+t.value)," ")}}function je(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",6)(1,"label",7),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"nb-select",38,39),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.eventNameValue=i)}),e.YNc(6,Ge,3,4,"nb-option",40),e.ALo(7,"keyvalue"),e.qZA(),e._UZ(8,"ngx-validation-message",41),e.qZA()}if(2&n){const t=e.MAs(5),o=e.oxw();e.xp6(2),e.hij("",e.lcZ(3,4,"Event.eventName")," *"),e.xp6(2),e.Q6J("ngModel",o.eventNameValue),e.xp6(2),e.Q6J("ngForOf",e.lcZ(7,6,o.listEventName)),e.xp6(2),e.Q6J("showRequired",(null==t||null==t.errors?null:t.errors.required)&&t.touched)}}function Re(n,a){if(1&n&&(e.TgZ(0,"nb-option",10),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(e.lcZ(2,2,"Event."+t.value))}}function He(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",6)(1,"label",7),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"nb-select",42,43),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.eventTypeValue=i)}),e.YNc(6,Re,3,4,"nb-option",40),e.ALo(7,"keyvalue"),e.qZA(),e._UZ(8,"ngx-validation-message",44)(9,"div",45),e.qZA()}if(2&n){const t=e.MAs(5),o=e.oxw();e.xp6(2),e.hij("",e.lcZ(3,4,"Event.eventType")," *"),e.xp6(2),e.Q6J("ngModel",o.eventTypeValue),e.xp6(2),e.Q6J("ngForOf",e.lcZ(7,6,o.listEventType)),e.xp6(2),e.Q6J("showRequired",(null==t||null==t.errors?null:t.errors.required)&&t.touched)}}function Ke(n,a){if(1&n&&(e.TgZ(0,"nb-option",10),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.displayName)}}function Pe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",6)(1,"label",7),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"nb-select",46,47),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.userId=i)}),e.YNc(6,Ke,2,2,"nb-option",40),e.qZA(),e._UZ(7,"ngx-validation-message",48),e.ALo(8,"translate"),e.qZA()}if(2&n){const t=e.MAs(5),o=e.oxw();e.xp6(2),e.hij("",e.lcZ(3,5,"User.userTable")," *"),e.xp6(2),e.Q6J("ngModel",o.userId),e.xp6(2),e.Q6J("ngForOf",o.listUser),e.xp6(1),e.s9C("label",e.lcZ(8,7,"User.userTable")),e.Q6J("showRequired",(null==t||null==t.errors?null:t.errors.required)&&t.touched)}}function ze(n,a){1&n&&(e.TgZ(0,"th",49),e._uU(1,"STT"),e.qZA())}function Ve(n,a){if(1&n&&(e.TgZ(0,"td",50),e._uU(1),e.qZA()),2&n){const t=a.index,o=e.oxw();e.xp6(1),e.hij(" ",o.paginator.pageIndex*o.paginator.pageSize+t+1," ")}}function We(n,a){1&n&&(e.TgZ(0,"th",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Event.eventName")))}function Xe(n,a){if(1&n&&(e.TgZ(0,"td",51),e.ALo(1,"translate"),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n){const t=a.$implicit;e.s9C("nbTooltip",e.lcZ(1,2,"Event."+t.eventName)),e.xp6(2),e.Oqu(e.lcZ(3,4,"Event."+t.eventName))}}function et(n,a){1&n&&(e.TgZ(0,"th",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Event.eventType")))}function tt(n,a){if(1&n&&(e.TgZ(0,"td",51),e.ALo(1,"translate"),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n){const t=a.$implicit;e.s9C("nbTooltip",e.lcZ(1,2,"Event."+t.eventType)),e.xp6(2),e.Oqu(e.lcZ(3,4,"Event."+t.eventType))}}function nt(n,a){1&n&&(e.TgZ(0,"th",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Event.eventStatus")))}function ot(n,a){if(1&n&&(e.TgZ(0,"td",51),e.ALo(1,"translate"),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n){const t=a.$implicit;e.s9C("nbTooltip",e.lcZ(1,2,"Event."+t.eventStatus)),e.xp6(2),e.Oqu(e.lcZ(3,4,"Event."+t.eventStatus))}}function it(n,a){1&n&&(e.TgZ(0,"th",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Event.eventDetail")))}function at(n,a){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("nbTooltip",t.eventDetail),e.xp6(1),e.Oqu(t.eventDetail)}}function st(n,a){1&n&&(e.TgZ(0,"th",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Event.timestamp")))}function rt(n,a){if(1&n&&(e.TgZ(0,"td",51),e.ALo(1,"date"),e._uU(2),e.ALo(3,"date"),e.qZA()),2&n){const t=a.$implicit;e.s9C("nbTooltip",e.xi3(1,2,t.timestamp,"dd/MM/yyyy hh:mm:ss ")),e.xp6(2),e.hij(" ",e.xi3(3,5,t.timestamp,"dd/MM/yyyy hh:mm:ss ")," ")}}function lt(n,a){1&n&&e._UZ(0,"tr",52)}function ct(n,a){1&n&&e._UZ(0,"tr",53)}function ut(n,a){1&n&&(e.TgZ(0,"div",54),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Message.NoData")," "))}const dt=function(){return[10,20,50,100]},mt=[{path:"",component:B,data:{role:[]},children:[{path:"users",canActivate:[x.a],component:pe,data:{title:"Users"}},{path:"users-authenticators/:id",canActivate:[x.a],component:Ie,data:{title:"Users"}},{path:"assertion",canActivate:[x.a],component:me,data:{title:"Assertion"}},{path:"log",canActivate:[x.a],component:(()=>{class n{constructor(t,o,i,s,l,m,b){this.eventService=t,this.dialogService=o,this.translateService=i,this.nbMenuService=s,this.messageService=l,this.router=m,this.usersService=b,this.displayedColumns=["id","eventName","eventType","eventStatus","eventDetail","timestamp"],this.dataSource=new c.by,this.selection=new U.Ov(!0,[]),this.items=[{title:g.t3,id:g.t3},{title:g.yY,id:g.yY}],this.to=new Date,this.from=new Date,this.dateToday=new Date,this.listEventName=D.B_,this.listEventType=D.tw}ngOnInit(){var t=this;return(0,p.Z)(function*(){yield t.getAllUserAccount(),yield t.findAll();for(const o of t.items)t.translateService.get("Button."+o.title).subscribe(i=>{i.includes("Button")||(o.title=i)})})()}findAll(){var t=this;return(0,p.Z)(function*(){let o,i;t.to?(o=new Date(t.to),o=new Date(o).toLocaleDateString("fr-CA")):o=null,t.from?(i=new Date(t.from),i=new Date(i).toLocaleDateString("fr-CA")):i=null,t.selection.clear(),t.dataSource.sort=t.sort,t.dataSource.paginator=t.paginator,yield t.eventService.getLogEvent(i,o).toPromise().then(s=>{s=s.sort((l,m)=>new Date(m.timestamp).getTime()-new Date(l.timestamp).getTime());for(const l of s)l.filter="";t.dataSource.sort=t.sort,t.dataSource.paginator=t.paginator,t.dataSource.data=s})})()}getLogEventByName(){var t=this;return(0,p.Z)(function*(){let o,i;t.to?(o=new Date(t.to),o=new Date(o).toLocaleDateString("fr-CA")):o=null,t.from?(i=new Date(t.from),i=new Date(i).toLocaleDateString("fr-CA")):i=null,t.selection.clear(),t.dataSource.sort=t.sort,t.dataSource.paginator=t.paginator,t.eventNameValue&&(yield t.eventService.getLogEventByName(t.eventNameValue,i,o).toPromise().then(s=>{s=s.sort((l,m)=>new Date(m.timestamp).getTime()-new Date(l.timestamp).getTime());for(const l of s)l.filter="";t.dataSource.sort=t.sort,t.dataSource.paginator=t.paginator,t.dataSource.data=s}))})()}getLogEventByType(){var t=this;return(0,p.Z)(function*(){let o,i;t.to?(o=new Date(t.to),o=new Date(o).toLocaleDateString("fr-CA")):o=null,t.from?(i=new Date(t.from),i=new Date(i).toLocaleDateString("fr-CA")):i=null,t.selection.clear(),t.dataSource.sort=t.sort,t.dataSource.paginator=t.paginator,t.eventTypeValue&&(yield t.eventService.getLogEventByType(t.eventTypeValue,i,o).toPromise().then(s=>{s=s.sort((l,m)=>new Date(m.timestamp).getTime()-new Date(l.timestamp).getTime());for(const l of s)l.filter="";t.dataSource.sort=t.sort,t.dataSource.paginator=t.paginator,t.dataSource.data=s}))})()}getLogEventByUser(){var t=this;return(0,p.Z)(function*(){let o,i;t.to?(o=new Date(t.to),o=new Date(o).toLocaleDateString("fr-CA")):o=null,t.from?(i=new Date(t.from),i=new Date(i).toLocaleDateString("fr-CA")):i=null,t.selection.clear(),t.userId&&(yield t.eventService.getLogEventByUser(t.userId,i,o).toPromise().then(s=>{s=s.sort((l,m)=>new Date(m.timestamp).getTime()-new Date(l.timestamp).getTime());for(const l of s)l.filter="";t.dataSource.sort=t.sort,t.dataSource.paginator=t.paginator,t.dataSource.data=s}))})()}getAllUserAccount(){var t=this;return(0,p.Z)(function*(){yield t.usersService.getAllUserAccount().toPromise().then(o=>{o=o.sort((i,s)=>i.displayName.localeCompare(s.displayName)),t.listUser=o})})()}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(t=>this.selection.select(t))}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}doFilter(t){this.dataSource.filter=t.trim().toLocaleLowerCase()}changeOptionFilter(){this.to=new Date,this.from=new Date}filterDataTable(){switch(this.filterBy){case 0:this.findAll();break;case 1:this.getLogEventByName();break;case 2:this.getLogEventByType();break;case 3:this.getLogEventByUser()}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36($e),e.Y36(r.Gln),e.Y36(h.sK),e.Y36(r.kkI),e.Y36(v.e),e.Y36(f.F0),e.Y36(T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ngx-log"]],viewQuery:function(t,o){if(1&t&&(e.Gf(y.YE,5),e.Gf(A.NW,5)),2&t){let i;e.iGM(i=e.CRH())&&(o.sort=i.first),e.iGM(i=e.CRH())&&(o.paginator=i.first)}},decls:84,vars:46,consts:[[1,"col-sm-12"],[1,"row","align-items-center"],[1,"flex-1","text-uppercase"],[1,"col-dm-12","gap-none"],[1,"row"],[1,"col-sm-12","gap-none"],[1,"form-group","col-sm-6"],[1,"label"],["fullWidth","","name","employee","required","","placeholder","T\u1ea5t c\u1ea3",3,"ngModel","ngModelChange"],["employee","ngModel"],[3,"value"],["class","form-group col-sm-6",4,"ngIf"],["nbInput","","fullWidth","","name","fromDate","readonly","",3,"nbDatepicker","ngModel","ngModelChange"],["toDate","ngModel"],["format","dd/MM/yyyy",3,"max"],["formPickerTo",""],["nbInput","","fullWidth","","name","toDate","readonly","",3,"nbDatepicker","ngModel","ngModelChange"],["format","dd/MM/yyyy",3,"min","max"],["formPickerFrom",""],[1,"col-sm-12","text-right"],["type","button","nbButton","","hero","","status","primary",1,"float-right","ml-2",3,"click"],["showFirstLastButtons","",1,"float-right",3,"pageSizeOptions","pageSize"],[1,"col-sm-4","gap-none"],["nbPrefix","","icon","search-outline","pack","eva"],["nbInput","","status","primary",3,"placeholder","keyup"],["id","matTable","mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","eventName"],["mat-cell","",3,"nbTooltip",4,"matCellDef"],["matColumnDef","eventType"],["matColumnDef","eventStatus"],["matColumnDef","eventDetail"],["matColumnDef","timestamp"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","text-center",4,"ngIf"],["fullWidth","","name","eventName","required","","placeholder","Ch\u1ecdn t\xe1c v\u1ee5",3,"ngModel","ngModelChange"],["eventName","ngModel"],[3,"value",4,"ngFor","ngForOf"],["label","eventName",3,"showRequired"],["fullWidth","","name","eventType","required","","placeholder","Ch\u1ecdn lo\u1ea1i",3,"ngModel","ngModelChange"],["eventType","ngModel"],["label","eventType",3,"showRequired"],["id","userId"],["fullWidth","","name","user","required","","placeholder","Ch\u1ecdn ng\u01b0\u1eddi d\xf9ng",3,"ngModel","ngModelChange"],["user","ngModel"],[3,"label","showRequired"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-cell","",3,"nbTooltip"],["mat-header-row",""],["mat-row",""],[1,"text-center"]],template:function(t,o){if(1&t&&(e.TgZ(0,"nb-card")(1,"nb-card-header")(2,"div",0)(3,"div",1)(4,"h6",2),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"div",3)(8,"div",4)(9,"div",5)(10,"div",4)(11,"div",6)(12,"label",7),e._uU(13,"L\u1ecdc theo"),e.qZA(),e.TgZ(14,"nb-select",8,9),e.NdJ("ngModelChange",function(s){return o.filterBy=s})("ngModelChange",function(){return o.changeOptionFilter()}),e.TgZ(16,"nb-option",10),e._uU(17,"T\u1ea5t c\u1ea3"),e.qZA(),e.TgZ(18,"nb-option",10),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"nb-option",10),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"nb-option",10),e._uU(25),e.ALo(26,"translate"),e.qZA()()(),e.YNc(27,je,9,8,"div",11),e.YNc(28,He,10,8,"div",11),e.YNc(29,Pe,9,9,"div",11),e.qZA()(),e.TgZ(30,"div",5)(31,"div",4)(32,"div",6)(33,"label",7),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"nb-form-field")(37,"input",12,13),e.NdJ("ngModelChange",function(s){return o.from=s}),e.qZA(),e._UZ(39,"nb-datepicker",14,15),e.qZA()(),e.TgZ(41,"div",6)(42,"label",7),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.TgZ(45,"nb-form-field")(46,"input",16,13),e.NdJ("ngModelChange",function(s){return o.to=s}),e.qZA(),e._UZ(48,"nb-datepicker",17,18),e.qZA()()()(),e.TgZ(50,"div",19)(51,"button",20),e.NdJ("click",function(){return o.filterDataTable()}),e._uU(52),e.ALo(53,"translate"),e.qZA()()()()()(),e.TgZ(54,"nb-card-body")(55,"div"),e._UZ(56,"mat-paginator",21),e.TgZ(57,"div",22)(58,"nb-form-field"),e._UZ(59,"nb-icon",23),e.TgZ(60,"input",24),e.NdJ("keyup",function(s){return o.doFilter(s.target.value)}),e.ALo(61,"translate"),e.qZA()()()(),e.TgZ(62,"table",25),e.ynx(63,26),e.YNc(64,ze,2,0,"th",27),e.YNc(65,Ve,2,1,"td",28),e.BQk(),e.ynx(66,29),e.YNc(67,We,3,3,"th",27),e.YNc(68,Xe,4,6,"td",30),e.BQk(),e.ynx(69,31),e.YNc(70,et,3,3,"th",27),e.YNc(71,tt,4,6,"td",30),e.BQk(),e.ynx(72,32),e.YNc(73,nt,3,3,"th",27),e.YNc(74,ot,4,6,"td",30),e.BQk(),e.ynx(75,33),e.YNc(76,it,3,3,"th",27),e.YNc(77,at,2,2,"td",30),e.BQk(),e.ynx(78,34),e.YNc(79,st,3,3,"th",27),e.YNc(80,rt,4,8,"td",30),e.BQk(),e.YNc(81,lt,1,0,"tr",35),e.YNc(82,ct,1,0,"tr",36),e.qZA(),e.YNc(83,ut,3,3,"div",37),e.qZA()()),2&t){const i=e.MAs(40),s=e.MAs(49);e.xp6(5),e.hij(" ",e.lcZ(6,29,"Log.LogTable")," "),e.xp6(9),e.Q6J("ngModel",o.filterBy),e.xp6(2),e.Q6J("value",0),e.xp6(2),e.Q6J("value",1),e.xp6(1),e.Oqu(e.lcZ(20,31,"Event.eventName")),e.xp6(2),e.Q6J("value",2),e.xp6(1),e.Oqu(e.lcZ(23,33,"Event.eventType")),e.xp6(2),e.Q6J("value",3),e.xp6(1),e.Oqu(e.lcZ(26,35,"User.userTable")),e.xp6(2),e.Q6J("ngIf",1===o.filterBy),e.xp6(1),e.Q6J("ngIf",2===o.filterBy),e.xp6(1),e.Q6J("ngIf",3===o.filterBy),e.xp6(5),e.hij("",e.lcZ(35,37,"T\u1eeb ng\xe0y")," *"),e.xp6(3),e.Q6J("nbDatepicker",i)("ngModel",o.from),e.xp6(2),e.Q6J("max",o.to),e.xp6(4),e.hij("",e.lcZ(44,39,"\u0110\u1ebfn ng\xe0y")," *"),e.xp6(3),e.Q6J("nbDatepicker",s)("ngModel",o.to),e.xp6(2),e.Q6J("min",o.from)("max",o.dateToday),e.xp6(4),e.Oqu(e.lcZ(53,41,"Global.Search")),e.xp6(4),e.Q6J("pageSizeOptions",e.DdM(45,dt))("pageSize",10),e.xp6(4),e.s9C("placeholder",e.lcZ(61,43,"Global.Search")),e.xp6(2),e.Q6J("dataSource",o.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("ngIf",o.dataSource.data.length<1)}},dependencies:[_.sg,_.O5,r.Asz,r.yKW,r.ndF,r.DPz,r.fMN,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,A.NW,d.Fj,d.JJ,d.Q7,d.On,r.h8i,r.$kf,r.B4C,r.rs,r.q51,L.C,r.jNv,r.jBG,r.t3q,_.uU,_.Nd,h.X$]}),n})(),data:{title:"log"}}]}];let gt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[f.Bz.forChild(mt),f.Bz]}),n})(),ht=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[k.m8,Z.Tx,w.LD,c.p0,A.TU,r.MAY,d.u5,gt,r.nKr,r.OA,r.IIj,r.CG_,r.HKp,N.K,r.rgH,r.j7H.forChild(),r.V7y,Y.E,r.EoG,r.PYG,M.k,r.Qry,J.D,O.T5,d.UX,C.t,C.t]}),n})()}}]);